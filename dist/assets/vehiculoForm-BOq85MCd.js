import{y as ne,H as m,a4 as de,D as ue,a2 as j,E as ce,o as d,c as p,b as a,w as r,d as l,z as _,s as f,a as s,F as w,k as S,a3 as G,r as pe}from"./index-Buq65buf.js";import{u as fe}from"./resource-N2DTwtF9.js";import{u as _e}from"./vehicle-DLEZlmX3.js";import{u as ve}from"./orden-I3bnYuAs.js";import{v as D}from"./validateText-UQqnbmko.js";import{u as De}from"./filtro-CgHtUwQt.js";import{B as ge}from"./BaseBreadcrumb-BUjUSeql.js";import{V as n,a as x}from"./VRow-Ctz1qQoW.js";import{V as be,a as H,b as J,c as K}from"./VExpansionPanel-t9Xlir-2.js";import{V as u}from"./VLabel-Q0nQNgOl.js";import{V}from"./VTextField-Ck2WlqEn.js";import{V as B}from"./VTextarea-COBtQWw5.js";import{V as g}from"./VAutocomplete-CbjURqPs.js";import{V as Ve}from"./VSelect-AWVCrat9.js";import{V as k}from"./VBtn-78ZGxu3p.js";import{V as ye}from"./VProgressCircular-5aNpqKQU.js";import"./useRender-BxYPdWix.js";import"./router-BUAsRsjo.js";import"./VCard-DYx3ZWBV.js";import"./VAvatar-DnqmwHRx.js";import"./transition-B72dfbUm.js";import"./group-Db2nUOtn.js";import"./index-BR_FMKrs.js";import"./lazy-B33KSTCg.js";import"./VField-FB0ObzHG.js";import"./VInput-DW8trHrA.js";import"./forwardRefs-D3j0TLhE.js";import"./filter-Can5VoxW.js";import"./VList-DWEkCzxE.js";import"./ssrBoot-J2Isbuk5.js";import"./VDivider-CrauPodZ.js";import"./VMenu-Vw07ipyt.js";import"./VOverlay-BKbQgHv6.js";import"./scopeId-3T0RsHAR.js";import"./dialog-transition-9GmGLlaY.js";import"./VCheckboxBtn-TAC0gRQb.js";import"./VSelectionControl-BcfiU6xa.js";import"./VChip-vQfLyUmr.js";import"./VSlideGroup-BbB4uZJz.js";import"./resizeObserver-BmQKPLvZ.js";const he=s("h4",{class:"mb-5 mt-2 font-weight-light"},[s("b",null," REGISTRO DEL VEHÍCULO: "),l(" Todos los campos con "),s("span",{style:{color:"red"}},"(*)"),l("son obligatorios ")],-1),we=s("span",{style:{color:"red"}},"(*)",-1),xe={key:0,class:"v-messages font-weight-black px-2 py-2"},ke=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Ee=[ke],Ue=s("span",{style:{color:"red"}},"(*)",-1),Ce={key:0,class:"v-messages font-weight-black px-2 py-2"},Ie=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Ne=[Ie],Se=s("span",{style:{color:"red"}}," (*)",-1),Be={key:0,class:"v-messages font-weight-black px-2 py-2"},Me=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Pe=[Me],Te=s("span",{style:{color:"red"}},"(*)",-1),ze={key:0,class:"v-messages font-weight-black px-2 py-2"},Re=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),qe=[Re],$e=s("span",{style:{color:"red"}},"(*)",-1),Ae={key:0,class:"v-messages font-weight-black px-2 py-2"},Fe=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Le=[Fe],Oe=s("span",{style:{color:"red"}},"(*)",-1),je={key:0,class:"v-messages font-weight-black px-2 py-2"},Ge=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),He=[Ge],Je=s("span",{style:{color:"red"}},"(*)",-1),Ke={key:0,class:"v-messages font-weight-black px-2 py-2"},Qe=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),We=[Qe],Xe=s("span",{style:{color:"red"}},"(*)",-1),Ye={key:0,class:"v-messages font-weight-black px-2 py-2"},Ze=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),eo=[Ze],oo=s("span",{style:{color:"red"}},"(*)",-1),ao={key:0,class:"v-messages font-weight-black px-2 py-2"},to=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),ro=[to],so=s("span",{style:{color:"red"}},"(*)",-1),lo={key:0,class:"v-messages font-weight-black ml-3 mt-2"},io=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),mo=[io],no=s("span",{style:{color:"red"}},"(*)",-1),uo={key:0,class:"v-messages font-weight-black ml-3 mt-2"},co=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),po=[co],fo=s("span",{style:{color:"red"}},"*",-1),_o={key:0,class:"v-messages font-weight-black ml-3 mt-2"},vo=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Do=[vo],sa=ne({__name:"vehiculoForm",setup(go){const M=m([0]),E=De(),y=_e(),b=de(),P=fe();ve();const Q=["GASOLINA","DIESEL","KEROSENE"],i=m(!1),U=m(!0);m(!1);const C=m(!1),W=JSON.parse(localStorage.getItem("user")||"").nombre_perfil,X=m({title:"Registro del vehículo"}),Y=m([{text:"Dashboard",disabled:!1,href:"/home"},{text:"Vehículos",disabled:!0,href:"#"}]),Z=m(!0),T=m(!1),e=ue({formData:{id_orden:"",placa_chasis:"",nombre_taller:"",placa:"",chasis:"",marca:"",modelo:"",motor:"",anio_fabri:"",color_ve:"",placas:"",chasis_:"",kilometraje:"",nro_ocupantes:"",combustible:"",fuerza_orden:"",tipo_orden:"",id_vehiculo:"",clase:"",modelo_año:"",departamento:"",provincia:"",municipio:"",fuerza:"",procedencia:"",grupo:"",anio_baja:"",componente:"",comparar_:"",kilo_:"",valido_kilo:"",estado_orden:""}}),h=m([]),I=m([]),z=m([]),N=m([]),ee=async()=>{h.value=await P.getPlaces(),I.value=h.value.filter(v=>v.tipo=="DEPARTAMENTO")},oe=async v=>{let o=I.value.find(c=>c.nombre_region==v);N.value=h.value.filter(c=>c.tipo=="PROVINCIA"&&c.padre==o.id)},ae=async v=>{let o=N.value.find(c=>c.nombre_region==v);z.value=h.value.filter(c=>c.tipo=="MUNICIPIO"&&c.padre==o.id)},R=m([]),q=m([]),$=m([]),A=m([]),F=m([]);m([]);const te=async()=>{R.value=await E.clase(),q.value=await E.tipo(),$.value=await E.marcas(),A.value=await y.getFuerza(),F.value=await y.getProce()},re=m([]),se=async()=>{re.value=await P.getDepartments()};m([]);const le=async v=>{const o=await y.getIDv(v);e.formData.id_vehiculo=o.id_v,e.formData.chasis_=o.chasis,e.formData.placas=o.placa,e.formData.nro_ocupantes=o.nro_ocupantes,e.formData.motor=o.motor,e.formData.marca=o.id_marca,e.formData.modelo=o.tipo1,e.formData.color_ve=o.color,e.formData.combustible=o.combustible,e.formData.tipo_orden=o.id_clase,e.formData.anio_fabri=o.anio_registro,e.formData.anio_baja=o.anio_baja,e.formData.departamento=o.departamento,e.formData.municipio=o.municipio,e.formData.provincia=o.provincia,e.formData.fuerza=o.id_fuerza,e.formData.grupo=o.grupo,e.formData.procedencia=o.id_procedencia,e.formData.componente=o.componente,T.value=!1,e.formData.comparar_=o.total,e.formData.kilo_=o.kilo_rem,e.formData.estado_orden=o.estado;let t=(parseInt(e.formData.comparar_)+1)*parseInt(e.formData.kilo_);e.formData.valido_kilo=String(t)},ie=()=>{G.push({name:"VehiculoList"})},L=async()=>{if(i.value=!0,await me(),!!U.value){if(C.value=!0,b.params.id_v=="0")j.fire({title:"¿Estás seguro?",text:"Verifica que la información registrada sea correcta",icon:"warning",showCancelButton:!0,cancelButtonColor:"#FA896B",confirmButtonColor:"#5D87FF",cancelButtonText:"No, volver",confirmButtonText:"Si, enviar formulario"}).then(async v=>{if(v.isConfirmed){const{ok:o,message:c}=await y.createVehicle(e.formData),t=o?"success":"error";O.fire({icon:t,title:c})}});else if(Z.value){const{ok:v,message:o}=await y.updateVehicle(e.formData),c=v?"success":"error";O.fire({icon:c,title:o})}else G.push({name:"vehiculoList"});C.value=!1}},me=async()=>{U.value=!0,(!e.formData.placas||!e.formData.chasis_||!e.formData.color_ve||!e.formData.combustible||!e.formData.tipo_orden||!e.formData.fuerza||!e.formData.marca||!e.formData.nro_ocupantes||!e.formData.motor||!e.formData.combustible||!e.formData.procedencia||!e.formData.tipo_orden||!e.formData.modelo)&&(U.value=!1)},O=j.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0});return ce(async()=>{await se(),await ee(),await te(),b.params.id_v!="0"&&(await le(b.params.id_v),T.value=!0)}),(v,o)=>{const c=pe("v-rom");return d(),p(w,null,[a(ge,{title:X.value.title,breadcrumbs:Y.value},null,8,["title","breadcrumbs"]),a(x,null,{default:r(()=>[a(n,{cols:"12",lg:"12"},{default:r(()=>[he]),_:1})]),_:1}),a(c,null,{default:r(()=>[a(be,{modelValue:M.value,"onUpdate:modelValue":o[28]||(o[28]=t=>M.value=t)},{default:r(()=>[a(H,{elevation:"10"},{default:r(()=>[a(J,{class:"text-h6"},{default:r(()=>[l("Caracteristicas del vehículo")]),_:1}),a(K,{class:"mt-4"},{default:r(()=>[a(x,null,{default:r(()=>[a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Placa "),we]),_:1}),a(V,{variant:"outlined",color:"primary",modelValue:e.formData.placas,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formData.placas=t),modelModifiers:{trim:!0},onInput:o[1]||(o[1]=t=>e.formData.placas=_(D)(e.formData.placas.toUpperCase())),error:i.value&&!e.formData.placas,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.placas?(d(),p("div",xe,Ee)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Chasis "),Ue]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.chasis_,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formData.chasis_=t),modelModifiers:{trim:!0},onInput:o[3]||(o[3]=t=>e.formData.chasis_=_(D)(e.formData.chasis_.toUpperCase())),error:i.value&&!e.formData.chasis_,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.placas?(d(),p("div",Ce,Ne)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Tipo "),Se]),_:1}),a(g,{variant:"outlined",color:"primary",items:R.value,modelValue:e.formData.tipo_orden,"onUpdate:modelValue":o[4]||(o[4]=t=>e.formData.tipo_orden=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_clase","item-title":"nombre_clase",error:i.value&&!e.formData.tipo_orden},null,8,["items","modelValue","error"]),i.value&&!e.formData.tipo_orden?(d(),p("div",Be,Pe)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Marca"),Te]),_:1}),a(g,{variant:"outlined",color:"primary",items:$.value,modelValue:e.formData.marca,"onUpdate:modelValue":o[5]||(o[5]=t=>e.formData.marca=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_marca","item-title":"nombre_marca",error:i.value&&!e.formData.marca},null,8,["items","modelValue","error"]),i.value&&!e.formData.marca?(d(),p("div",ze,qe)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Modelo"),$e]),_:1}),a(g,{variant:"outlined",color:"primary",items:q.value,modelValue:e.formData.modelo,"onUpdate:modelValue":o[6]||(o[6]=t=>e.formData.modelo=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_tipo","item-title":"nombre_tipo",error:i.value&&!e.formData.modelo},null,8,["items","modelValue","error"]),i.value&&!e.formData.modelo?(d(),p("div",Ae,Le)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Color"),Oe]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.color_ve,"onUpdate:modelValue":o[7]||(o[7]=t=>e.formData.color_ve=t),modelModifiers:{trim:!0},onInput:o[8]||(o[8]=t=>e.formData.color_ve=_(D)(e.formData.color_ve.toUpperCase())),error:i.value&&!e.formData.color_ve,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.color_ve?(d(),p("div",je,He)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Motor "),Je]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.motor,"onUpdate:modelValue":o[9]||(o[9]=t=>e.formData.motor=t),modelModifiers:{trim:!0},onInput:o[10]||(o[10]=t=>e.formData.motor=_(D)(e.formData.motor.toUpperCase())),error:i.value&&!e.formData.motor,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.motor?(d(),p("div",Ke,We)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("N° de ocupantes "),Xe]),_:1}),a(V,{variant:"outlined",color:"primary",type:"number",min:"1",modelValue:e.formData.nro_ocupantes,"onUpdate:modelValue":o[11]||(o[11]=t=>e.formData.nro_ocupantes=t),modelModifiers:{trim:!0},onInput:e.formData.nro_ocupantes,"hide-details":"",error:i.value&&!e.formData.nro_ocupantes},null,8,["modelValue","onInput","error"]),i.value&&!e.formData.nro_ocupantes?(d(),p("div",Ye,eo)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Tipo de combustible"),oo]),_:1}),s("div",null,[a(Ve,{modelValue:e.formData.combustible,"onUpdate:modelValue":o[12]||(o[12]=t=>e.formData.combustible=t),items:Q,"item-title":"nombre_region","item-value":"nombre_region",error:i.value&&!e.formData.combustible},null,8,["modelValue","error"]),i.value&&!e.formData.combustible?(d(),p("div",ao,ro)):f("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(H,{elevation:"10",class:"mt-3"},{default:r(()=>[a(J,{class:"text-h6",style:{color:"black"}},{default:r(()=>[l("Información del vehículo")]),_:1}),a(K,{class:"mt-4"},{default:r(()=>[a(x,null,{default:r(()=>[a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Grupo")]),_:1}),a(V,{variant:"outlined",color:"primary",modelValue:e.formData.grupo,"onUpdate:modelValue":o[13]||(o[13]=t=>e.formData.grupo=t),modelModifiers:{trim:!0},onInput:o[14]||(o[14]=t=>e.formData.grupo=_(D)(e.formData.grupo.toUpperCase())),"hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Fuerza"),so]),_:1}),a(g,{variant:"outlined",color:"primary",items:A.value,modelValue:e.formData.fuerza,"onUpdate:modelValue":o[15]||(o[15]=t=>e.formData.fuerza=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_fuerza","item-title":"nombre_fuerza",error:i.value&&!e.formData.fuerza},null,8,["items","modelValue","error"]),i.value&&!e.formData.fuerza?(d(),p("div",lo,mo)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Procedencia"),no]),_:1}),a(g,{variant:"outlined",color:"primary",items:F.value,modelValue:e.formData.procedencia,"onUpdate:modelValue":o[16]||(o[16]=t=>e.formData.procedencia=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_procedencia","item-title":"nombre_procedencia",error:i.value&&!e.formData.procedencia},null,8,["items","modelValue","error"]),i.value&&!e.formData.procedencia?(d(),p("div",uo,po)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Departamento "),fo]),_:1}),a(g,{variant:"outlined",color:"primary",items:I.value,modelValue:e.formData.departamento,"onUpdate:modelValue":[o[17]||(o[17]=t=>e.formData.departamento=t),o[18]||(o[18]=t=>{oe(e.formData.departamento)})],"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region",error:i.value&&!e.formData.departamento},null,8,["items","modelValue","error"]),i.value&&!e.formData.departamento?(d(),p("div",_o,Do)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Provincia ")]),_:1}),a(g,{variant:"outlined",color:"primary",items:N.value,modelValue:e.formData.provincia,"onUpdate:modelValue":[o[19]||(o[19]=t=>e.formData.provincia=t),o[20]||(o[20]=t=>{ae(e.formData.provincia)})],"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region"},null,8,["items","modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Municipio ")]),_:1}),a(g,{variant:"outlined",color:"primary",items:z.value,modelValue:e.formData.municipio,"onUpdate:modelValue":o[21]||(o[21]=t=>e.formData.municipio=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region"},null,8,["items","modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Año de Ingreso")]),_:1}),a(V,{variant:"outlined",color:"primary",modelValue:e.formData.anio_fabri,"onUpdate:modelValue":o[22]||(o[22]=t=>e.formData.anio_fabri=t),modelModifiers:{trim:!0},onInput:o[23]||(o[23]=t=>e.formData.anio_fabri=_(D)(e.formData.anio_fabri.toUpperCase())),min:"1980",type:"number","hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Año de Baja")]),_:1}),a(V,{variant:"outlined",color:"primary",modelValue:e.formData.anio_baja,"onUpdate:modelValue":o[24]||(o[24]=t=>e.formData.anio_baja=t),modelModifiers:{trim:!0},onInput:o[25]||(o[25]=t=>e.formData.anio_baja=_(D)(e.formData.anio_baja.toUpperCase())),min:"1980",type:"number","hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(u,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Componente ")]),_:1}),a(V,{variant:"outlined",color:"primary",modelValue:e.formData.componente,"onUpdate:modelValue":o[26]||(o[26]=t=>e.formData.componente=t),modelModifiers:{trim:!0},onInput:o[27]||(o[27]=t=>e.formData.componente=_(D)(e.formData.componente.toUpperCase())),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(x,null,{default:r(()=>[a(n,{cols:"12",class:"text-lg-left pt-5"},{default:r(()=>[C.value?(d(),S(k,{key:1,color:"primary",disabled:""},{default:r(()=>[a(ye,{indeterminate:"",color:"white",class:"mr-2"}),l(" Enviando... ")]),_:1})):(d(),p(w,{key:0},[a(k,{color:"error",class:"mr-3",onClick:o[29]||(o[29]=t=>ie())},{default:r(()=>[l("Volver")]),_:1}),_(b).params.id_v=="0"?(d(),S(k,{key:0,color:"primary",onClick:o[30]||(o[30]=t=>L())},{default:r(()=>[_(b).params.id_v=="0"?(d(),p(w,{key:0},[l(" Enviar ")],64)):f("",!0)]),_:1})):f("",!0),_(b).params.id_v!="0"?(d(),S(k,{key:1,color:"primary",onClick:o[31]||(o[31]=t=>L())},{default:r(()=>[_(b).params.id_v!="0"||_(W).includes("SUPER ADMINISTRADOR")?(d(),p(w,{key:0},[l(" Actualizar ")],64)):f("",!0)]),_:1})):f("",!0)],64))]),_:1})]),_:1})],64)}}});export{sa as default};
